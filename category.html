---
title: Category List
---

<h2 id="title"></h2>
<ul id="posts"></ul>

<script>
  const params = new URLSearchParams(location.search);
  const category = params.get("cat") ?? localStorage.getItem('lastCategoryOpened');
  if(params.get("cat")) {
    localStorage.setItem('lastCategoryOpened', category);
    window.history.pushState({}, "", window.location.href.split("?")[0]);
  }
  
  document.getElementById("title").textContent = category;
  
  fetch("{{ '/assets/js/posts.json' | relative_path }}")
  .then(r => r.json())
  .then(posts => {
    const postsList = document.getElementById("posts");

    posts
    .filter(p => p.categories.includes(category))
    .forEach(p => {
      const li = document.createElement("li");
      li.innerHTML = `<a href="${p.url}">${p.title}</a>`;
      postsList.appendChild(li);
    });
  });
</script>